-- Initial database

DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `username` TEXT NOT NULL,
  `password` TEXT NOT NULL,
  `email` TEXT,
  `config` TEXT
);

INSERT INTO `users` (`id`, `username`, `password`, `config`)
    VALUES (1, 'admin', '$pbkdf2-sha256$6400$/N87Z6w1xjgHwPifs3buPQ$7k8ZnhgsKVR0BW5mpwgro50PlGKBcWilBXIZyHHGddg','{"role": ["admin", "dm"], "avatar": "data:image/png;base64,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"}');

DROP TABLE IF EXISTS `character`;
CREATE TABLE `character` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `name` TEXT NOT NULL,
  `level` INTEGER DEFAULT 1,
  `config` TEXT
);

DROP TABLE IF EXISTS `user_characters`;
CREATE TABLE `user_characters` (
  `user_id` INTEGER,
  `character_id` INTEGER
);
CREATE UNIQUE INDEX
    `u_c` on `user_characters` (`user_id`, `character_id`);

DROP TABLE IF EXISTS `party`;
CREATE TABLE `party` (
  `id` integer primary key autoincrement,
  `name` text not null,
  `user_id` INTEGER,
  `config` TEXT
);

DROP TABLE IF EXISTS `party_characters`;
CREATE TABLE `party_characters` (
  `party_id` INTEGER,
  `character_id` INTEGER
);
CREATE UNIQUE INDEX
    `p_c` on `party_characters` (`party_id`, `character_id`);

DROP TABLE IF EXISTS `monster`;
CREATE TABLE `monster` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `name` TEXT NOT NULL,
  `size` TEXT,
  `challenge_rating` FLOAT DEFAULT 0.0,
  `xp_rating` INTEGER DEFAULT 10,
  `xp` INTEGER DEFAULT 10,
  `config` TEXT
);

DROP TABLE IF EXISTS `encounter`;
CREATE TABLE `encounter` (
  `id` INTEGER primary key autoincrement,
  `name` text not null,
  `user_id` INTEGER,
  `size` INTEGER,
  `challenge_rating` FLOAT DEFAULT 0.0,
  `xp_rating` INTEGER DEFAULT 10,
  `xp` INTEGER DEFAULT 10,
  `config` TEXT
);

DROP TABLE IF EXISTS `encounter_monsters`;
CREATE TABLE `encounter_monsters` (
  `encounter_id` INTEGER,
  `monster_id` INTEGER
);

DROP TABLE IF EXISTS `campaign`;
CREATE TABLE `campaign` (
  `id` INTEGER primary key autoincrement,
  `name` text not null,
  `user_id` INTEGER,
  `config` TEXT
);

DROP TABLE IF EXISTS `npc`;
CREATE TABLE `npc` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `name` TEXT NOT NULL,
  `location` TEXT NOT NULL,
  `organization` TEXT NOT NULL,
  `config` TEXT
);
